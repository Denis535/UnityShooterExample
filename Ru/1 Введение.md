# 1. Введение
Всем привет!

В этом видео курсе я покажу вам мой пример шутера от третьего лица.
В этом проекте я постарался реализовать все свои лучшие идеи и практики, которые я накопил за годы работы в игровой индустрии.
И теперь я хочу поделиться с вами моим опытом, и рассказать вам о моем проекте и о лучших практиках в разработке игр.

Заметьте, что я не буду углубляться в детали устройства движка Unity, так как предполагается, что у вас уже есть базовые знания об этом движке.
Вместо этого, я буду рассказывать о главных принципах разработки качественных проектов.
Так же заметьте, что эти знания будут вам полезны не только для работы с Unity, но и в любых других сферах программирования.

В этом курсе:
- Мы рассмотрим все детали устройства нашего проекта и дополнительные пакеты.
- Мы рассмотрим лучшие практики разработки качественных проектов.
- Мы рассмотрим принципы проектирования качественной архитектуры проекта.
- Мы рассмотрим принципы организации удобной файловой структуры проекта.
- Мы рассмотрим как расширить редактор Unity, чтобы сделать работу с проектом более удобной.
- Мы рассмотрим как написать для UIToolkit красивую тему стилей.
- Вы получите доступ к проекту и сможете использовать его в качестве шаблона для ваших проектов.
- Вы получите доступ к дополнительным пакетам, которые вы так же сможете использовать в ваших собственных проектах.

###### Проект
А теперь давайте рассмотрим наш проект и дополнительные модули.
Папка Project содержит все основные модули и системные файлы нашего проекта.
Папка Project.Content содержит все исходники и ассеты наших основных модулей.
Модуль Project.Infrastructure является дополнительным модулем нашего проекта и содержит все технические детали и прочий мусор.
Так же наш проект содержит несколько ассет бандлов, которые содержат почти все ассеты нашего проекта.
Пакет Clean Architecture Game Framework помогает вам организовать архитектуру вашего проекта, а так же предоставляет некоторые утилиты.
Пакет Addressables Extensions помогает вам управлять вашими ассетами.
Пакет Addressables Source Generator помогает вам использоват ваши ассеты.
Пакет Colorful Project Window предоставляет вам более удобное окно проекта.
Пакет UIToolkit Theme Style Sheet предоставляет вам красивую тему для вашего UI.

###### Проект
А теперь давайте запустим наш проект и поиграем в него!

# 2. Организация качественной архитектуры проекта
###### Введение
В этом видео мы подробно рассмотрим принципы организации качественной архитектуры проекта.

###### Проблема
Любой достаточно сложный проект имеет большое количество разных модулей, неймспейсов и типов.
В идеале каждая единица проекта должна иметь одно конкретное назначение и минимальное количество зависимостей.
Но в реальности, проект легко превращается в кучу файлов с непонятными назначениями и запутанными зависимостями.
Поэтому нужны парадигмы, которые будут однозначно и понятно определять архитектуру проектов.

###### Решения
Для лучшей организации архитектуры проекта я могу предложить следующие идеи:

- Первая идея — это модульная архитектура.
  Это идея, что проект декомпозируется на более простые модули.
  Декомпозиция должна проводится так, чтобы каждый модуль, неймспейс или тип имел единственную и понятную ответственность.
  Или так, чтобы отделить все самое важное от всего менее важного.
  Так же желательно, чтобы каждый модуль имел минимальное количество зависимостей.
  В итоге получается проект состоящий из множества простых модулей.
  Что, в свою очередь, делает разработку такого проекта более удобной.

- Вторая идея — это чистая архитектура.
  Это идея, что проект декомпозируется на модули: точка входа, презентация, приложение и предметная область.
  А все зависимости направлены от первых модулей к последним.
  Так же проект может иметь дополнительные модули инфраструктуры.
  В итоге получается проект состоящий из модулей, каждый из которых имеет понятную ответственность и минимум зависимостей.
  А разработка такого проекта становится более удобной и слаженной.

- Третья идея — это domain-driven дизайн.
  Это идея, что модули предметной области являются самыми главными в проекте.
  Предметная область — это множество сущностей, выполняющих бизнес задачи приложения и отражающие объекты реального или придуманного мира.
  То есть модули предметной области выполняют все бизнес задачи.
  А все остальные модули являются техническими и лишь обеспечивают функционирование модулей предметной области.
  В итоге получается, что предметная область полностью выделена в специальные модули.
  А разработка такой предметной области становится более независимой от всего прочего.

- Четвертая идея — это инверсия зависимостей.
  Это идея, что модули предметной области не должны иметь зависимостей на технические модули.
  Вместо этого, технические модули могут иметь зависимости на модули предметной области.
  Таким образом получается, что предметная область может неявно использовать инфраструктуру через свои собственные абстракции.
  Но только при условии, что инфраструктура имеет реализации для этих абстракций.
  В итоге получается, что предметная область полностью очищена от всех технических деталей.
  А разработка такой предметной области становится абсолютно независимой от всего прочего.

- Пятая идея — это view-driven ui.
  Это идея, что пользовательский интерфейс представляется деревом визуальных элементов.
  Такая архитектура хорошо подходит для обычных оконных приложений.
  В таких приложениях, все элементы пользовательского интерфейса расположены в главном окне.
  А если что-то не уместилось в главном окне, то пользователь может открывать дополнительные окна.
  Но для некоторых случаев этого недостаточно...

- Шестая идея — это state-driven ui.
  Это идея, что пользовательский интерфейс представляется деревом состояний и деревом визуальных элементов.
  Причем дерево состояний полностью независимо от дерева визуальных элементов.
  Вы можете добавлять (или удалять) ноды и даже целые ветки нодов в ваше дерево состояний.
  А каждое состояние, в свою очередь, может иметь (или не иметь) свое визуальное представление.
  Таким образом вы можете делать сложные пользовательские интерфейсы, состоящие из разных состояний и их комбинаций.
  А главное вы можете элегантно переключать пользовательский интерфейс между разными состояниями.
  Такая архитектура хорошо подходит для полноэкранных приложений, таких как мобильные приложения или игры.
  В таких приложениях, в один момент времени, пользовательский интерфейс может находиться лишь в одном или нескольких состояниях.
  А пользователь может перемещаться по пользовательскому интерфейсу, переключая эти состояния одни на другие.

###### Выводы
Благодаря этим идеям, проекты получаются достаточно логичными и структурированными.
А их внутренние устройства становятся очень схожими даже между разными проектами.
В итоге команда разработчиков может сосредоточить свое внимание на решении бизнес задач и меньше думать о технических проблемах.
Что в свою очередь повышает эффективность разработки и поддержки проекта.

# 3. Организация удобной файловой структуры проекта
###### Введение
В этом видео мы подробно рассмотрим принципы организации удобной файловой структуры проекта.

###### Проблема
При разработке достаточно сложных проектов, количество файлов и папок быстро вырастает до огромных количеств.
Без продуманной структуры, ориентироваться в таких проектах становится очень тяжело.
Поэтому нужно организовывать проекты таким образом, чтобы с ними было удобнее работать.

###### Решения
Для более удобной организации структуры проекта я могу предложить следующие советы:

- Первый совет — рассматривайте проект как множество рабочих пространств.
  Нужно организовать проекты таким образом, чтобы при выполнении какой-либо задачи, все необходимые файлы находились рядом друг с другом, а все остальные файлы находились отдельно.
  Давайте посмотрим на наш проект.
  В папке Project я храню только определения основных модулей и некоторые другие системные файлы.
  А в папке Project.Content я храню все исходники и ассеты этих модулей.
  Заметьте, что эти исходники и ассеты не перемешаны друг с другом, а содержатся в специальных папках.
  Эти папки привязаны к соответствующим модулям или адресуемым группам (addressables groups).
  А названия этих папок отражают названия соответствующих модулей или групп.
  При необходимости вы даже можем привязать несколько разных папок к одному модулю или группе.
  Обратите внимание, есть еще один дополнительный модуль инфраструктуры, который я спрятал в специальном пакете, отдельно от всего проекта.
  Так же обратите внимание, что в папке Plugins я спрятал библиотеки, которые не имеют прямого отношения к нашему проекту.
  В итоге получается, что все файлы, с которыми разработчики взаимодействуют чаще, всегда под рукой.
  А все прочие файлы находятся отдельно.

- Второй совет — подсвечивайте элементы проекта в разные цвета.
  Когда в проекте становится много разных файлов и папок, то они сливаются друг с другом в одну серую массу.
  Из-за этого каждый раз приходится прикладывать некоторые усилия, чтобы просто найти нужный файл.
  К счастью, можно улучшить окно проекта таким образом, чтобы подсветить специальные элементы в соответствующие им цвета.
  Давайте посмотрим на наш проект.
  Я подсвечиваю пакеты, модули, ассеты и исходники в соответствующие им синие, красные, желтые и зеленые цвета.
  В итоге разработчики могут быстро находить в проекте необходимые им файлы.
  Замечу, что в теории, можно было бы сделать лучше, но к сожалению Unity предоставляет мало возможностей для расширения окна проекта.

- Третий совет — используйте панель меню проекта для открытия нужных сцен.
  Вы можете расширить панель меню, добавляя в него ваши собственные команды.
  Это очень удобно так как эти команды всегда будут у вас под рукой.
  Давайте посмотрим на наш проект.
  Я создал несколько команд, которые выполняют некоторые полезные задачи, в том числе открывают сцены и некоторые другие файлы.
  В итоге, разработчики практически мгновенно могут открывать нужные им сцены и выполнять другие задачи.

###### Выводы
Благодаря этим идеям, большие проекты получаются более удобными.
А команде разработчиков гораздо проще работать с такими проектами.
Что в свою очередь так же повышает эффективность разработки и поддержки проекта.
